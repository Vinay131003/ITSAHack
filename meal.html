<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Meal Plan Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Custom styles for form beautification */
        body {
            background-color: #f5f5f5;
            font-family: 'Arial', sans-serif;
        }

        .form-container {
            background-color: #ffffff;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .form-title {
            color: light;
            font-weight: bold;
        }

        .form-label {
            color: #333;
            font-weight: 500;
        }

        .form-control,
        .form-select {
            border-radius: 8px;
        }

        .btn-primary {
            background-color: light;
            border: none;
            border-radius: 8px;
        }

        .btn-primary:hover {
            background-color: #0056b3;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        }

        .recipe-item {
            margin-bottom: 20px;
        }

        .recipe-item img {
            max-width: 100%;
            border-radius: 8px;
        }

        .meal-plan {
            margin-top: 30px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <div class="container mt-5 p-4 form-container">
        <h2 class="mb-4 text-center form-title">Personalized Meal Plan Form</h2>
        <form id="mealPlanForm">
            <!-- Basic Information Section -->
            <div class="mb-5">
                <h4 class="form-title">Basic Information</h4>
                <div class="mb-4">
                    <label for="name" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Enter your full name" required>
                </div>
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label for="age" class="form-label">Age</label>
                        <input type="number" class="form-control" id="age" name="age" placeholder="Enter your age" required>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="weight" class="form-label">Weight (kg)</label>
                        <input type="number" class="form-control" id="weight" name="weight" placeholder="Enter your weight" required>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="height" class="form-label">Height (cm)</label>
                        <input type="number" class="form-control" id="height" name="height" placeholder="Enter your height" required>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="gender" class="form-label">Gender</label>
                        <select class="form-select" id="gender" name="gender" required>
                            <option value="">Select gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Dietary Preferences Section -->
            <div class="mb-5">
                <h4 class="form-title">Dietary Restrictions and Food Habits</h4>
                <div class="mb-4">
                    <label class="form-label">Eating Habits</label>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="vegan" id="vegan" name="diet[]">
                        <label class="form-check-label" for="vegan">Vegan (no animal products)</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="vegetarian" id="vegetarian" name="diet[]">
                        <label class="form-check-label" for="vegetarian">Vegetarian (no meat, fish, or poultry)</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="pescatarian" id="pescatarian" name="diet[]">
                        <label class="form-check-label" for="pescatarian">Pescatarian (vegetarian + seafood)</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="gluten-free" id="glutenFree" name="diet[]">
                        <label class="form-check-label" for="glutenFree">Gluten-Free (no wheat, rye, or barley)</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="dairy-free" id="dairyFree" name="diet[]">
                        <label class="form-check-label" for="dairyFree">Dairy-Free (no milk or dairy products)</label>
                    </div>
                </div>
            </div>

            <!-- Health Goals Section -->
            <div class="mb-5">
                <h4 class="form-title">Health Goals</h4>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="weight-loss" id="weightLoss" name="healthGoals[]">
                    <label class="form-check-label" for="weightLoss">Weight Loss</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="muscle-gain" id="muscleGain" name="healthGoals[]">
                    <label class="form-check-label" for="muscleGain">Muscle Gain</label>
                </div>
            </div>

            <!-- Medical History Section -->
            <div class="mb-5">
                <h4 class="form-title">Medical History</h4>
                <div class="mb-4">
                    <label class="form-label">Do you have any of the following medical conditions?</label>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="diabetes" id="diabetes" name="medicalConditions[]">
                        <label class="form-check-label" for="diabetes">Diabetes</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="hypertension" id="hypertension" name="medicalConditions[]">
                        <label class="form-check-label" for="hypertension">Hypertension</label>
                    </div>
                </div>
                <div class="mb-4">
                    <label for="medicalHistory" class="form-label">Other Medical History</label>
                    <textarea class="form-control" id="medicalHistory" name="medicalHistory" rows="3" placeholder="Mention any other medical history or health issues"></textarea>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary w-100">Generate Meal Plan</button>
        </form>
    </div>

    <div class="container mt-5">
        <h2>Featured Recipes</h2>
        <div class="recipe-container" id="recipeContainer">
            <!-- Results will be dynamically inserted here -->
        </div>

        <div class="meal-plan" id="mealPlanContainer">
            <h3>Generated Meal Plan</h3>
            <div id="mealPlanOutput"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const apiKey = '6d1f31e6113c4985a26b34ecbfd91c3c'; // Replace with your Spoonacular API key
        const mealPlanForm = document.getElementById('mealPlanForm');
        const recipeContainer = document.getElementById('recipeContainer');
        const mealPlanOutput = document.getElementById('mealPlanOutput');

        // Handle the form submission
        mealPlanForm.addEventListener('submit', (e) => {
            e.preventDefault(); // Prevent form from submitting normally

            // Collecting basic information
            const name = document.getElementById('name').value;
            const age = document.getElementById('age').value;
            const weight = document.getElementById('weight').value;
            const height = document.getElementById('height').value;
            const gender = document.getElementById('gender').value;

            // Collecting dietary preferences
            const dietPreferences = Array.from(document.querySelectorAll('input[name="diet[]"]:checked')).map(el => el.value);
            const healthGoals = Array.from(document.querySelectorAll('input[name="healthGoals[]"]:checked')).map(el => el.value);
            const medicalConditions = Array.from(document.querySelectorAll('input[name="medicalConditions[]"]:checked')).map(el => el.value);
            const medicalHistory = document.getElementById('medicalHistory').value;

            // Generate meal plan
            generateMealPlan(name, age, weight, height, gender, dietPreferences, healthGoals, medicalConditions, medicalHistory);
        });

        async function generateMealPlan(name, age, weight, height, gender, dietPreferences, healthGoals, medicalConditions, medicalHistory) {
            // Example meal plan logic (mockup)
            const meals = [
                { meal: "Breakfast", type: "breakfast", recipes: [] },
                { meal: "Lunch", type: "lunch", recipes: [] },
                { meal: "Dinner", type: "dinner", recipes: [] }
            ];

            for (let meal of meals) {
                const recipes = await fetchRecipes(meal.type, dietPreferences);
                meal.recipes = recipes;
            }

            displayMealPlan(meals);
        }

        async function fetchRecipes(mealType, dietPreferences) {
            const dietaryParams = dietPreferences.length > 0 ? `&diet=${dietPreferences.join(',')}` : '';
            const response = await fetch(`https://api.spoonacular.com/recipes/complexSearch?type=${mealType}&number=3&apiKey=${apiKey}${dietaryParams}`);
            const data = await response.json();
            return data.results || [];
        }

        function displayMealPlan(meals) {
    mealPlanOutput.innerHTML = '';
    meals.forEach(meal => {
        const mealDiv = document.createElement('div');
        mealDiv.classList.add('meal-item');
        mealDiv.innerHTML = `<h4>${meal.meal}</h4>`;

        meal.recipes.forEach(recipe => {
            const recipeDiv = document.createElement('div');
            recipeDiv.classList.add('recipe-item');
            recipeDiv.innerHTML = `
                <h5>${recipe.title}</h5>
                <img src="${recipe.image}" alt="${recipe.title}">
                <p><a href="https://spoonacular.com/recipes/${recipe.title}-${recipe.id}" target="_blank">View Recipe</a></p>
            `;
            mealDiv.appendChild(recipeDiv);
        });

        mealPlanOutput.appendChild(mealDiv);
    });
}


    </script>
</body>

</html>


